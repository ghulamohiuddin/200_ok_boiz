{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talent Seeker Dashboard - CampusConnect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .active-tab {
            border-bottom: 2px solid #14b8a6;
            color: #14b8a6;
        }
        .job-card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans antialiased">

    <!-- Main Container -->
    <div class="flex flex-col min-h-screen">
        <!-- Navbar -->
        <header class="bg-gray-800 shadow-lg sticky top-0 z-50">
            <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
                <a href="{% url 'index' %}" class="flex items-center space-x-2 text-xl font-bold text-white">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg" class="text-teal-400">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
                              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>CampusConnect</span>
                </a>
                <div class="hidden md:flex items-center space-x-8 text-sm">
                    <a href="#" id="nav-jobs" class="text-teal-400 font-semibold border-b-2 border-teal-400 pb-1">Dashboard</a>
                    <a href="#" id="nav-saved" class="text-gray-300 hover:text-teal-400 transition-colors">Saved Jobs</a>
                    <a href="#" id="nav-profile" class="text-gray-300 hover:text-teal-400 transition-colors">Profile</a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="{% url 'accounts:logout' %}" class="text-sm text-gray-400 hover:text-white transition-colors">Logout</a>
                </div>
            </nav>
        </header>

        <!-- Job Listings -->
        <main id="jobs-view" class="flex-grow container mx-auto p-4 md:p-6 lg:p-8">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Left: Main Job Listings -->
                <div class="w-full lg:w-2/3">
                    <!-- Search and Filters -->
                    <form method="POST" class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                        {% csrf_token %}
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <input type="text" id="search-bar" name="search" placeholder="Search by title, company, or skill..."
                                   class="md:col-span-3 lg:col-span-1 w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-teal-500">
                            <select id="type-filter" name="type"
                                    class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-teal-500">
                                <option value="All">All Job Types</option>
                                <option value="Internship">Internship</option>
                                <option value="Part-time">Part-time</option>
                                <option value="Competition">Competition</option>
                                <option value="Project">Project</option>
                            </select>
                            <select id="status-filter" name="status"
                                    class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-teal-500">
                                <option value="All">All Statuses</option>
                                <option value="New">New</option>
                                <option value="Pending">Pending</option>
                                <option value="Shortlisted">Shortlisted</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                        </div>
                    </form>

                    <div id="job-cards-container" class="job-card-grid"></div>

                    <div id="no-jobs-message" class="hidden text-center py-16">
                        <h3 class="text-2xl font-bold text-gray-400">No Jobs Found</h3>
                        <p class="text-gray-500 mt-2">Try adjusting your filters or search terms.</p>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <aside class="w-full lg:w-1/3">
                    <div class="bg-gray-800 p-6 rounded-lg shadow-md sticky top-24">
                        <h3 class="text-xl font-bold text-white mb-4">Recommended For You</h3>
                        <div class="space-y-4">
                            <a href="#" class="block p-4 bg-gray-700 rounded-md hover:bg-gray-600 transition-colors">
                                <p class="font-bold text-white">AI Research Internship</p>
                                <p class="text-sm text-gray-400">MIT Media Lab</p>
                                <span class="text-xs text-teal-400 bg-teal-900/50 px-2 py-1 rounded-full mt-2 inline-block">Internship</span>
                            </a>
                            <a href="#" class="block p-4 bg-gray-700 rounded-md hover:bg-gray-600 transition-colors">
                                <p class="font-bold text-white">Web App for Social Good</p>
                                <p class="text-sm text-gray-400">Stanford University</p>
                                <span class="text-xs text-indigo-400 bg-indigo-900/50 px-2 py-1 rounded-full mt-2 inline-block">Project</span>
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <!-- Profile View -->
        <main id="profile-view" class="hidden flex-grow container mx-auto p-4 md:p-6 lg:p-8">
            <div class="max-w-3xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold text-white mb-6">Your Profile</h2>
                <div class="space-y-4 text-gray-300">
                    <p><strong>Name:</strong> {{ request.user.username }}</p>
                    <p><strong>Email:</strong> {{ request.user.email }}</p>
                    <p><strong>Skills:</strong> {{ request.user.skills|default:"Not added yet" }}</p>
                    <p><strong>Bio:</strong> {{ request.user.bio|default:"No bio provided." }}</p>
                    <a href="{% url 'accounts:profile' %}" class="mt-4 inline-block bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-md transition-colors">Edit Profile</a>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- Simple JS toggle for sections (no backend required for now) ---
        document.addEventListener('DOMContentLoaded', () => {
            const jobsView = document.getElementById('jobs-view');
            const profileView = document.getElementById('profile-view');
            const navJobs = document.getElementById('nav-jobs');
            const navProfile = document.getElementById('nav-profile');

            navJobs.addEventListener('click', (e) => {
                e.preventDefault();
                jobsView.classList.remove('hidden');
                profileView.classList.add('hidden');
                navJobs.classList.add('text-teal-400', 'border-b-2', 'border-teal-400');
                navProfile.classList.remove('text-teal-400', 'border-b-2', 'border-teal-400');
            });

            navProfile.addEventListener('click', (e) => {
                e.preventDefault();
                jobsView.classList.add('hidden');
                profileView.classList.remove('hidden');
                navProfile.classList.add('text-teal-400', 'border-b-2', 'border-teal-400');
                navJobs.classList.remove('text-teal-400', 'border-b-2', 'border-teal-400');
            });
        });
    </script>

</body>
</html>
